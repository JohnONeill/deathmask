<h1>MaskViewer#home</h1>
<p>Find me in app/views/mask_viewer/home.html.erb</p>

<div style="background: blue">

<%= javascript_include_tag "build/three.min.js" %>
<%= javascript_include_tag "globe/Three/Detector.js" %>
<%= javascript_include_tag "globe/Three/RequestAnimationFrame.js" %>
<% 
=begin
    <script>
    
        var camera, scene, renderer;
        var geometry, material, mesh;
    
        init();
        animate();
    
        function init() {
    
            camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
            camera.position.z = 1000;
    
            scene = new THREE.Scene();
    
            geometry = new THREE.CubeGeometry( 200, 200, 200 );
            material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );
    
            mesh = new THREE.Mesh( geometry, material );
            scene.add( mesh );
    
            renderer = new THREE.CanvasRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );
    
            document.body.appendChild( renderer.domElement );
    
        }
    
        function animate() {
    
            // note: three.js includes requestAnimationFrame shim
            requestAnimationFrame( animate );
    
            mesh.rotation.x += 0.01;
            mesh.rotation.y += 0.02;
    
            renderer.render( scene, camera );
    
        }
    
    </script>
=end 
%>

<script>
var container, camera, scene, webglRenderer;
var windowHalfX = window.innerWidth / 2;
var windowHalfY = window.innerHeight / 2;
var mesh, mesh_R_eye, mesh_L_eye;

function init() {
            // Setup the container that the simulation will happen in
            container = document.createElement( 'div' );
            document.body.appendChild( container );
           
            // Setup the Three.js camera
            camera = new THREE.Camera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
            camera.position.y = 150;
            camera.position.z = 500;
            camera.target.position.y = 150;

            // Setup scene
            scene = new THREE.Scene();

            // Setup Group
            group = new THREE.Object3D();
}

function addObjects() {
  var material = new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'models/bird_skin_col.png' ) } );
  var loader = new THREE.JSONLoader();
  loader.load( { model: 'obj/face.js', callback: function ( geometry ) {
      geometry.computeTangents();

      mesh = new THREE.Mesh( geometry, material );
      mesh.position.x = mesh.position.y = mesh.position.z = 0;
      mesh.rotation.x = mesh.rotation.y = mesh.rotation.z = 0;
      mesh.scale.x = mesh.scale.y = mesh.scale.z = 700;
      mesh.matrixAutoUpdate = false;
      mesh.updateMatrix();
      group.addChild(mesh);
  } } );

  // Finally when we are done loading our objects we need to add the group to the scene.
  scene.addObject( group );
}

initRenderer();
animate();

function initRenderer() {
            webglRenderer = new THREE.WebGLRenderer();
            webglRenderer.setSize( window.innerWidth, window.innerHeight );
            console.log('here');
            console.log(container);
            container.appendChild( webglRenderer.domElement );
}

function animate() {
            requestAnimationFrame( animate );
            //group.rotation.y += 0.05;
            webglRenderer.render( scene, camera );				
}

</script>

</div>